#!/bin/bash

# =============================
# VERIFICAR ROOT
# =============================
if [[ $EUID -ne 0 ]]; then
   echo "Este script debe ejecutarse como root"
   exit 1
fi

clear

# =============================
# COLORES OFICIALES
# =============================
R='\033[0;31m'; G='\033[0;32m'; Y='\033[1;33m'; B='\033[0;34m'
M='\033[0;35m'; C='\033[0;36m'; W='\033[1;37m'; N='\033[0m'
BOLD='\033[1m'
ROJO="\e[31m"; BLANCO="\e[97m"; CYAN="\e[36m"; AMARILLO="\e[33m"; RESET="\e[0m"

LINEA="${ROJO}══════════════════════════ / / / ══════════════════════════${RESET}"

# =============================
# ENCABEZADO
# =============================
echo -e "$LINEA"
echo -e "${BOLD}${BLANCO}                    INFORMACIÓN SLOWDNS                    ${RESET}"
echo -e "$LINEA"
echo ""

# =============================
# BANNER
# =============================
if command -v figlet >/dev/null 2>&1; then
    figlet -p -f slant SlowDNS
else
    echo -e "${G}                        SLOWDNS${RESET}"
fi

echo ""
echo -e "$LINEA"
echo ""
echo -e "${CYAN}INFORMACIÓN DEL SERVIDOR${RESET}"
echo ""

# =============================
# MOSTRAR NS
# =============================
if [[ -f /etc/slowdns/infons ]]; then
    echo -ne "${AMARILLO}Tu NS:${RESET} "
    cat /etc/slowdns/infons
else
    echo -e "${ROJO}No se encontró el archivo del NS.${RESET}"
fi

# =============================
# MOSTRAR CLAVE
# =============================
if [[ -f /root/server.pub ]]; then
    echo ""
    echo -e "${AMARILLO}Tu clave pública:${RESET}"
    cat /root/server.pub
    echo ""
    echo -e "${AMARILLO}Archivo guardado en:${RESET} /root/server.pub"
    echo -e "${CYAN}Guárdala en un lugar seguro para conectarte.${RESET}"
else
    echo ""
    echo -e "${ROJO}No se encontró la clave pública.${RESET}"
fi

echo ""
echo -e "$LINEA"
echo ""
echo -e "${AMARILLO}Presiona ENTER para continuar...${RESET}"
read

slowdns